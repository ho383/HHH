<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>地點記錄</title>
    <style>
        body, .container {
            display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; font-family: Arial, sans-serif;
        }
        .container { flex-direction: column; width: 100%; max-width: 480px; border: 1px solid #ccc; height: 80%; overflow: hidden; }
        .top-section { display: flex; flex: 1; }
        .display, .places { padding: 20px; overflow-y: auto; max-height: 100%; }
        .display { width: 50%; background-color: #e8f4fa; border-right: 1px solid #ccc; }
        .places { width: 50%; background-color: #f0f0f0; display: flex; flex-direction: column; }
        .places-buttons { display: flex; flex-wrap: wrap; gap: 5px; }
        button { padding: 10px; font-size: 14px; cursor: pointer; }
        /* 第一行按鈕樣式 */
        .action-button {
            background-color: #000000; /* 新的顏色 */
            color: white;
            border: none;
            border-radius: 5px;
        }
        .action-button:hover {
            background-color: #218838; /* 鼠標懸停顏色 */
        }
        /* 城市按鈕樣式 */
        .city-button {
            background-color: #f0f0f0;
            border: 1px solid #000000;
            color: #007bff;
            border-radius: 5px;
            flex: 1; /* 讓城市按鈕均分寬度 */
        }
        .city-button:hover {
            background-color: #cfe9ff;
        }
        button.selected { background-color: #007bff; color: white; } /* 被選中的城市按鈕 */
        .saved-records { width: 100%; padding: 20px; background-color: #e8f4fa; border-top: 1px solid #ccc; max-height: 20%; overflow-y: auto; }
        #scrollToTop { display: none; position: fixed; bottom: 20px; right: 30px; font-size: 18px; background-color: #007bff; color: white; border: none; border-radius: 5px; padding: 10px; cursor: pointer; }
        #copyButton { display: none; } /* 只在手機顯示的複製按鈕 */
    </style>
</head>
<body>

<div class="container">
    <div class="top-section">
        <div class="display" id="historyDisplay">選擇歷史會顯示在這裡</div>
        <div class="places">
            <div>
                <button class="action-button" onclick="clearAll()">清除</button>
                <button class="action-button" onclick="saveSelection()">保存</button>
                <button class="action-button" onclick="deleteLastSaved()">刪除</button>
                <button class="action-button" id="copyButton" onclick="copyToClipboard()">複製</button>
            </div>
            <div class="places-buttons" id="cityButtonsContainer">
                <button class="city-button" onclick="showPlaces('osaka')">大阪</button>
                <button class="city-button" onclick="showPlaces('tokyo')">東京</button>
                <button class="city-button" onclick="showPlaces('hokkaido')">北海道</button>
            </div>
            <div class="places-buttons" id="placesButtonsContainer"></div>
            <div>
                <input type="text" id="customPlaceInput" placeholder="請輸入文字">
                <button class="action-button" onclick="addCustomPlace()">新增</button>
                <button class="action-button" onclick="deleteAllCustomPlaces()">刪除全部</button>
            </div>
        </div>
    </div>
    <div class="saved-records" id="savedRecordsDisplay">保存的選擇：<br></div>
</div>

<button id="scrollToTop" onclick="scrollToTop()">回到頂部</button>

<script>
    let selectedPlaces = [], savedSelections = JSON.parse(localStorage.getItem('savedSelections')) || [], currentCity = 'osaka', customPlaces = JSON.parse(localStorage.getItem('customPlaces')) || { osaka: [], tokyo: [], hokkaido: [] };
    const places = { osaka: [ '黑門市場', 
    '美國村', 
    '心齋橋', 
    '道頓堀', 
    '東西向商店街', 
    '通天閣新世界', 
    '天王寺動物園', 
    '天保山海遊館', 
    '環球影城', 
    '溫泉大世界溫泉樂園', 
    '奈良鹿公園', 
    '東大寺', 
    '嵐山渡月橋', 
    '伏見稻荷大社', 
    '大阪城', 
    '臨空城OUTLET'], tokyo: ['淺草寺', 
    '東京塔', 
    '迪士尼樂園', 
    '台場', 
    '秋葉原', 
    '明治神宮', 
    '上野動物園', 
    '新宿御苑', 
    '六本木之丘', 
    '銀座', 
    '築地市場', 
    '晴空塔', 
    '代代木公園', 
    '代官山', 
    '澀谷十字路口', 
    '皇居', 
    '池袋', 
    '靖國神社', 
    '日本橋', 
    '千鳥之淵', 
    '東京車站', 
    '中目黑', 
    '涉谷109', 
    '東京國立博物館', 
    '原宿竹下通', 
    '淺草花屋敷', 
    '上野公園', 
    '日比谷公園', 
    '表參道', 
    '代官山蔦屋書店', 
    '東京大學', 
    '四谷怪談寺', 
    '武道館', 
    '東京巨蛋', 
    '後樂園', 
    '葛西臨海公園', 
    '池袋陽光城', 
    '豐島園', 
    '吉祥寺', 
    '三鷹之森吉卜力美術館', 
    '大江戶溫泉物語'], hokkaido: ['大通公園', 
    '小樽運河', 
    '富良野花田', 
    '千歲機場OUTLET', 
    '狸小路商店街', 
    '北海道神宮', 
    '場外海鮮市場', 
    '北海道電視塔', 
    '白色燈樹節', 
    '慕尼黑聖誕市集', 
    '小樽三角市場', 
    '浪漫小樽運河', 
    '登別藝術忍者時代村', 
    '日和山火山', 
    '登別地獄谷', 
    '登別溫泉極樂通商店街', 
    '鬼金棒溫泉', 
    '美食老街小樽堺町通商店街', 
    '北海道最大尼克斯海洋公園', 
    '支笏洞爺湖國立公園', 
    '函館光之屋台大門橫丁', 
    '小樽音樂盒堂本館', 
    '天狗山夜景', 
    '金森紅磚倉庫', 
    '五稜郭公園', 
    '函館山纜車', 
    '函館限定小丑漢堡', 
    '函館朝市釣烏賊', 
    '函館絕美冬景八幡坂', 
    '湯之川溫泉', 
    '湯倉兔子神社'] };

    function showPlaces(city) {
        currentCity = city;
        const placesContainer = document.getElementById('placesButtonsContainer');
        placesContainer.innerHTML = '';
        [...places[city], ...customPlaces[city]].forEach(place => createButton(place, placesContainer));
        highlightSelectedCity(city); // 高亮顯示當前選擇的城市
    }

    function createButton(place, container) {
        const button = document.createElement('button');
        button.textContent = place;
        button.onclick = () => toggleSelection(place, button);
        container.appendChild(button);
    }

    function toggleSelection(place, button) {
        const index = selectedPlaces.indexOf(place);
        index === -1 ? (selectedPlaces.push(place), button.classList.add('selected')) : (selectedPlaces.splice(index, 1), button.classList.remove('selected'));
        updateHistoryDisplay();
    }

    function updateHistoryDisplay() {
        document.getElementById('historyDisplay').innerHTML = selectedPlaces.length > 0 ? '你選擇的景點：<br><br>' + selectedPlaces.join('<br>') : '選擇歷史會顯示在這裡';
    }

    function addCustomPlace() {
        const customPlace = document.getElementById('customPlaceInput').value.trim();
        if (customPlace) {
            customPlaces[currentCity].push(customPlace);
            localStorage.setItem('customPlaces', JSON.stringify(customPlaces));
            document.getElementById('customPlaceInput').value = '';
            showPlaces(currentCity);
        } else alert('請輸入自訂義景點！');
    }

    function clearAll() {
        selectedPlaces = [];
        document.querySelectorAll('.places-buttons button').forEach(button => button.classList.remove('selected'));
        updateHistoryDisplay();
    }

    function saveSelection() {
        if (selectedPlaces.length > 0) {
            savedSelections.push(`第 ${savedSelections.length + 1} 天: ${selectedPlaces.join(', ')}`);
            localStorage.setItem('savedSelections', JSON.stringify(savedSelections));
            displaySavedSelections();
            clearAll();
        } else alert('請先選擇一些景點！');
    }

    function displaySavedSelections() {
        document.getElementById('savedRecordsDisplay').innerHTML = savedSelections.length > 0 ? '保存的選擇：<br>' + savedSelections.join('<br>') : '保存的選擇：<br>';
        document.getElementById('copyButton').style.display = savedSelections.length > 0 ? 'block' : 'none'; // 有保存選擇時顯示複製按鈕
    }

    function deleteLastSaved() {
        savedSelections.pop();
        localStorage.setItem('savedSelections', JSON.stringify(savedSelections));
        displaySavedSelections();
    }

    window.onload = function() {
        displaySavedSelections();
        showPlaces(currentCity);
        highlightSelectedCity(currentCity);
    };

    function highlightSelectedCity(city) {
        document.querySelectorAll('#cityButtonsContainer button').forEach(button => {
            button.classList.remove('selected'); // 移除所有城市按鈕的選中狀態
            if (button.textContent === city) button.classList.add('selected'); // 只有當前城市保持選中狀態
        });
    }

    function scrollToTop() {
        window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    window.onscroll = function() {
        document.getElementById('scrollToTop').style.display = document.body.scrollTop > 100 || document.documentElement.scrollTop > 100 ? "block" : "none";
    };

    function deleteAllCustomPlaces() {
        customPlaces[currentCity] = [];
        localStorage.setItem('customPlaces', JSON.stringify(customPlaces));
        showPlaces(currentCity);
    }

    // 複製功能
    function copyToClipboard() {
        const textToCopy = savedSelections.join('\n'); // 取得需要複製的文本
        navigator.clipboard.writeText(textToCopy).then(() => {
            alert('已複製保存的選擇！');
        }).catch(err => {
            console.error('複製失敗：', err);
        });
    }
</script>

</body>
</html>

